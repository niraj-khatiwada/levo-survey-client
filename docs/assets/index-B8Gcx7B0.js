import{c as b,r as l,f as v,j as e,N as j,L as N,D as w,g as S,s as k}from"./index-QOvrX_Ro.js";const P=function(){const c=b(),[r,x]=l.useState(1),[o,m]=l.useState(null),[d,i]=l.useState("desc"),a=10,{data:t,isLoading:u,error:n}=v({queryKey:["surveys",r,a],queryFn:()=>k.getSurveys(r,a)}),g=s=>{o===s?i(d==="asc"?"desc":"asc"):(m(s),i("asc"))},h=[{key:"title",header:"Title",sortable:!0,render:s=>e.jsx("div",{className:"font-medium text-gray-900",children:s})},{key:"type",header:"Type",sortable:!0,render:s=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s==="internal"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:s.toUpperCase()})},{key:"is_draft",header:"Status",sortable:!0,render:s=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s?"Draft":"Published"})},{key:"created_at",header:"Created At",sortable:!0,render:s=>e.jsx("span",{className:"text-gray-500",children:S(s)})}],f=(t==null?void 0:t.items)||[],y=(t==null?void 0:t.total)||0,p=(t==null?void 0:t.pages)||0;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{}),e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Surveys"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage and view all your surveys"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(N,{to:"/survey-builder",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Survey"]})})]}),n&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading surveys"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:n instanceof Error?n.message:"An unknown error occurred"})]})]})}),e.jsx(w,{data:f,columns:h,loading:u,pagination:{currentPage:r,totalPages:p,totalItems:y,itemsPerPage:a,onPageChange:x},sorting:{sortBy:o,sortOrder:d,onSort:g},emptyMessage:"No surveys found. Create your first survey to get started!",onRowClick:s=>{c({to:"/surveys/$id",params:{id:s.id}})}})]})]})};export{P as component};
